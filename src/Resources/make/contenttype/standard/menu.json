{
    "class": "EMS\\CoreBundle\\Entity\\ContentType",
    "arguments": [],
    "properties": {
        "created": {
            "date": "2020-03-15 13:50:01.000000",
            "timezone_type": 3,
            "timezone": "Europe\/Brussels"
        },
        "modified": {
            "date": "2020-05-11 15:44:48.000000",
            "timezone_type": 3,
            "timezone": "Europe\/Brussels"
        },
        "name": "menu",
        "pluralName": "Menus",
        "singularName": "Menu",
        "icon": "fa fa-list-ul",
        "description": null,
        "indexTwig": null,
        "extra": null,
        "lockBy": null,
        "lockUntil": null,
        "circlesField": "",
        "businessIdField": "",
        "deleted": false,
        "havePipelines": false,
        "askForOuuid": false,
        "dirty": false,
        "color": "green",
        "fieldType": {
            "class": "EMS\\CoreBundle\\Entity\\FieldType",
            "arguments": [],
            "properties": {
                "__initializer__": null,
                "__cloner__": null,
                "__isInitialized__": true,
                "created": {
                    "date": "2020-03-15 13:50:01.000000",
                    "timezone_type": 3,
                    "timezone": "Europe\/Brussels"
                },
                "modified": {
                    "date": "2020-03-24 09:41:08.000000",
                    "timezone_type": 3,
                    "timezone": "Europe\/Brussels"
                },
                "type": "EMS\\CoreBundle\\Form\\DataField\\ContainerFieldType",
                "name": "source",
                "contentType": null,
                "deleted": false,
                "description": null,
                "options": {
                    "displayOptions": {
                        "label": null,
                        "class": null,
                        "lastOfRow": false,
                        "helptext": null,
                        "icon": null
                    },
                    "restrictionOptions": {
                        "minimum_role": null
                    },
                    "extraOptions": {
                        "extra": null,
                        "postProcessing": null
                    }
                },
                "orderKey": 0,
                "parent": null,
                "children": [
                    {
                        "class": "EMS\\CoreBundle\\Entity\\FieldType",
                        "arguments": [],
                        "properties": {
                            "created": {
                                "date": "2020-03-15 13:51:38.000000",
                                "timezone_type": 3,
                                "timezone": "Europe\/Brussels"
                            },
                            "modified": {
                                "date": "2020-04-06 21:34:00.000000",
                                "timezone_type": 3,
                                "timezone": "Europe\/Brussels"
                            },
                            "type": "EMS\\CoreBundle\\Form\\DataField\\TextStringFieldType",
                            "name": "label",
                            "contentType": null,
                            "deleted": false,
                            "description": null,
                            "options": {
                                "displayOptions": {
                                    "label": "Label",
                                    "class": "col-md-12",
                                    "lastOfRow": false,
                                    "helptext": null,
                                    "prefixIcon": null,
                                    "prefixText": null,
                                    "suffixIcon": null,
                                    "suffixText": null,
                                    "placeholder": null,
                                    "icon": null
                                },
                                "mappingOptions": {
                                    "index": null,
                                    "analyzer": null,
                                    "copy_to": null
                                },
                                "restrictionOptions": {
                                    "mandatory": false,
                                    "mandatory_if": null,
                                    "minimum_role": null
                                },
                                "extraOptions": {
                                    "extra": null,
                                    "postProcessing": null
                                },
                                "raw_data": [],
                                "migrationOptions": {
                                    "protected": false
                                }
                            },
                            "orderKey": 1,
                            "parent": null,
                            "children": []
                        }
                    },
                    {
                        "class": "EMS\\CoreBundle\\Entity\\FieldType",
                        "arguments": [],
                        "properties": {
                            "created": {
                                "date": "2020-04-06 21:29:08.000000",
                                "timezone_type": 3,
                                "timezone": "Europe\/Brussels"
                            },
                            "modified": {
                                "date": "2020-04-06 21:32:53.000000",
                                "timezone_type": 3,
                                "timezone": "Europe\/Brussels"
                            },
                            "type": "EMS\\CoreBundle\\Form\\DataField\\DataLinkFieldType",
                            "name": "children",
                            "contentType": null,
                            "deleted": false,
                            "description": null,
                            "options": {
                                "displayOptions": {
                                    "label": "Children",
                                    "class": "col-md-12",
                                    "dynamicLoading": true,
                                    "lastOfRow": false,
                                    "helptext": null,
                                    "multiple": true,
                                    "sortable": true,
                                    "type": "page,link",
                                    "searchId": null,
                                    "defaultValue": null
                                },
                                "mappingOptions": {
                                    "index": "not_analyzed",
                                    "analyzer": "keyword",
                                    "copy_to": null
                                },
                                "restrictionOptions": {
                                    "mandatory": false,
                                    "mandatory_if": null,
                                    "minimum_role": null
                                },
                                "extraOptions": {
                                    "extra": null,
                                    "postProcessing": null,
                                    "updateReferersField": null
                                },
                                "raw_data": [],
                                "migrationOptions": {
                                    "protected": false
                                }
                            },
                            "orderKey": 3,
                            "parent": null,
                            "children": []
                        }
                    }
                ]
            }
        },
        "labelField": "label",
        "colorField": "",
        "userField": null,
        "dateField": null,
        "startDateField": null,
        "endDateField": null,
        "locationField": null,
        "refererFieldName": null,
        "categoryField": "",
        "ouuidField": null,
        "imageField": "",
        "videoField": null,
        "emailField": "",
        "assetField": "",
        "orderField": null,
        "sortBy": "",
        "sortOrder": null,
        "createRole": "ROLE_ADMIN",
        "editRole": "ROLE_PUBLISHER",
        "viewRole": "ROLE_WEBMASTER",
        "publishRole": "ROLE_PUBLISHER",
        "trashRole": "ROLE_ADMIN",
        "orderKey": 5,
        "rootContentType": false,
        "editTwigWithWysiwyg": true,
        "webContent": false,
        "autoPublish": false,
        "active": true,
        "templates": [
            {
                "class": "EMS\\CoreBundle\\Entity\\Template",
                "arguments": [],
                "properties": {
                    "created": {
                        "date": "2020-03-21 07:53:14.000000",
                        "timezone_type": 3,
                        "timezone": "Europe\/Brussels"
                    },
                    "modified": {
                        "date": "2020-03-24 09:41:08.000000",
                        "timezone_type": 3,
                        "timezone": "Europe\/Brussels"
                    },
                    "name": "JSON raw",
                    "icon": "fa fa-file-text-o",
                    "body": "{% spaceless %}\r\n    <pre class=\"ems-code-editor\" data-language=\"ace\/mode\/json\" data-them=\"ace\/theme\/chrome\">\r\n        {{- source|json_encode(constant('JSON_PRETTY_PRINT')) -}}\r\n    <\/pre>\r\n{% endspaceless %}",
                    "header": null,
                    "editWithWysiwyg": false,
                    "renderOption": "embed",
                    "orderKey": 0,
                    "accumulateInOneFile": false,
                    "preview": false,
                    "mimeType": null,
                    "filename": null,
                    "extension": null,
                    "active": true,
                    "role": "ROLE_WEBMASTER",
                    "roleTo": "not-defined",
                    "roleCc": "not-defined",
                    "circlesTo": [],
                    "responseTemplate": null,
                    "emailContentType": null,
                    "allowOrigin": null,
                    "disposition": null,
                    "orientation": null,
                    "size": null,
                    "public": false
                }
            }
        ],
        "views": [
            {
                "class": "EMS\\CoreBundle\\Entity\\View",
                "arguments": [],
                "properties": {
                    "name": "overview",
                    "type": "ems.view.report",
                    "icon": "fa fa-list-ul",
                    "options": {
                        "body": "{% spaceless %}\r\n    {% set must = [] %}\r\n    {% set body = {\r\n        \"sort\": [\r\n            {\r\n              \"_finalization_datetime\": {\r\n                \"order\": \"desc\"\r\n              }\r\n            }\r\n        ] \r\n    } %}\r\n    \r\n    {% if app.request.query.get('q', false) %}\r\n        {% set must = must|merge({ \r\n            \"query_string\": {\r\n                \"query\": app.request.query.get('q')|default('*'),\r\n                \"default_field\": app.request.query.get('fields')|default('_all')\r\n            } \r\n        }) %}\r\n    {% endif %}\r\n    \r\n    {% if must %}{% set body = body|merge({'query': { \"bool\": { \"must\": must } } } ) %}{% endif %}\r\n{% endspaceless %}\r\n{{- body|json_encode|raw -}}",
                        "size": 3000,
                        "template": "{% set tableLength = 100 %}\r\n{% set environments = ['preview', 'live'] %}\r\n{% set config = 'config'|i18n('en')|json_decode %}\r\n\r\n{% set published = [] %}\r\n{% for env in environments %}\r\n    {% set envHits = {\r\n        \"index\": (\"#{config.instance_id}#{env}\"),\r\n        \"size\": 3000,\r\n        \"_source\": ['_sha1'],\r\n        \"body\": {\"query\": {\"term\": { \"_contenttype\": { \"value\": \"#{contentType.name}\" } } } }\r\n    }|search.hits.hits %}\r\n    {% set envIdSha1 = [] %}\r\n    {% for hit in envHits %}\r\n        {% set envIdSha1 = envIdSha1|merge({ (hit._id): (hit._source._sha1) }) %}\r\n    {% endfor %}\r\n    {% set published = published|merge({ (env): (envIdSha1) }) %}\r\n{% endfor %}\r\n\r\n<div class=\"table-responsive\">\r\n    <table id=\"overview\" class=\"table table-bordered table-striped\" data-page-length=\"{{ tableLength }}\" >\r\n        <thead>\r\n            <tr>\r\n                {% if is_granted(contentType.editRole) %}<th style=\"width: 20px;\" data-orderable=\"false\"><\/th>{% endif %}\r\n                <th>label<\/th>\r\n                <th class=\"text-center\">published<\/th>\r\n                <th class=\"text-center\" style=\"width: 20px;\">info<\/th>\r\n                {% if is_granted('ROLE_COPY_PASTE') or is_granted('ROLE_ADMIN') %}<th style=\"width: 60px;\" data-orderable=\"false\"><\/th>{% endif %}\r\n            <\/tr>\r\n        <\/thead>\r\n        <tbody>\r\n            {% for hit in result.hits.hits %}\r\n                {% set info %}\r\n                   {{ hit._source._finalization_datetime|date('d-m-Y H:i') }}\r\n                   <br \/>\r\n                   {{ hit._source._finalized_by is defined ? hit._source._finalized_by : '' }}\r\n                {% endset %}\r\n                <tr>\r\n                    {% if is_granted(contentType.editRole) %}\r\n                        <td><a class=\"btn btn-xs btn-primary\" href=\"{{ path('revision.new-draft', {'type': contentType.name, 'ouuid': hit._id }) }}\"><i class=\"fa fa-pencil\" \/><\/a><\/td>\r\n                    {% endif %}\r\n                    <td><a href=\"{{ path('ems_content_revisions_view', {'type': contentType.name, 'ouuid': hit._id }) }}\" >{{ hit._source.label }}<\/a><\/td>\r\n                    <td class=\"text-center\" data-order=\"{{ environments|filter(v => hit._id in attribute(published, v)|keys)|join(' ') }}\">\r\n                        <div class=\"btn-group\">\r\n                            {% for env in environments %}\r\n                                {% set isPublished = (hit._id in attribute(published, env)|keys ? true : false) %}\r\n                                {% set isAligned = (hit._source._sha1 == attribute(attribute(published, env), hit._id)|default(false) ? true : false) %}\r\n                                {% set envClass = (isAligned ? 'primary' : (isPublished ? 'default' : 'danger') ) %}\r\n                                \r\n                                <button type=\"button\" class=\"btn btn-xs {{ \"btn-#{envClass}\" }}\" {{ envClass == \"danger\" ? 'disabled' }}>{{ env|capitalize }}<\/button>\r\n                            {% endfor %}\r\n                        <\/div>\r\n                    <\/td>\r\n                    <td class=\"text-center\" data-order=\"{{ hit._source._finalization_datetime }}\">\r\n                        <i class=\"fa fa-info-circle text-primary\" data-toggle=\"tooltip\" data-placement=\"top\" data-html=\"true\"  aria-hidden=\"true\" title=\"{{ info }}\"><\/i>\r\n                    <\/td>\r\n                    {% if is_granted('ROLE_COPY_PASTE') or is_granted('ROLE_ADMIN') %}\r\n                        <td class=\"text-center\">\r\n                            <div class=\"btn-group\">\r\n                                {% if is_granted('ROLE_COPY_PASTE') %}\r\n                                    <a class=\"btn btn-xs btn-default\" href=\"{{ path('revision.copy', {'environment': contentType.environment.name, 'type': contentType.name, 'ouuid': hit._id } ) }}\">\r\n            \t\t\t\t\t\t\t<i class=\"fa fa-copy\"><\/i>\r\n            \t\t\t\t\t\t<\/a>\r\n        \t\t\t\t\t\t{% endif %}\r\n        \t\t\t\t\t\t{% if is_granted('ROLE_ADMIN') %}\r\n            \t\t\t\t\t\t<a class=\"btn btn-xs btn-default\" href=\"{{ path('data.view', {'environmentName': contentType.environment.name, 'type': contentType.name, 'ouuid':  hit._id} ) }}\">\r\n            \t\t\t\t\t\t\t<i class=\"fa fa-file-text\"><\/i>\r\n            \t\t\t\t\t\t<\/a>\r\n        \t\t\t\t\t\t{% endif %}\r\n    \t\t\t\t\t\t<\/div>\r\n                        <\/td>\r\n                    {% endif %}\r\n                <\/tr>\r\n            {% endfor %}\r\n        <\/tbody>\r\n    <\/table>\r\n<\/div>",
                        "header": "<style type=\"text\/css\">\r\n    table#overview .btn { padding: 2px 6px; }\r\n    table#overview td { vertical-align: middle; }\r\n<\/style>",
                        "javascript": "<script>\r\n    $('[data-toggle=\"tooltip\"]').tooltip()\r\n    $(\"#overview\").DataTable({\r\n       \"order\": []\r\n    });\r\n<\/script>"
                    },
                    "orderKey": 0,
                    "public": false
                }
            }
        ],
        "defaultValue": null,
        "translationField": "",
        "localeField": "locale",
        "searchLinkDisplayRole": "ROLE_ADMIN",
        "createLinkDisplayRole": "ROLE_ADMIN",
        "versionTags": [],
        "versionDateFromField": null,
        "versionDateToField": null
    }
}
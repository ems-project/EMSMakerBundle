{
    "_contenttype": "template",
    "_finalization_datetime": "2020-05-27T15:36:45+0200",
    "_finalized_by": "davmat",
    "body": "{% extends '@EMSCH\/template\/base.html.twig' %}\r\n{% trans_default_domain trans_default_domain %}\r\n\r\n\r\n{% block title %}{{ attribute(source, 'title_' ~ app.request.locale) }}{% endblock %}\r\n\r\n{% set childrenContainerClass = 'col-md-3 col-sm-6 pt-2 pb-2' %}\r\n{% set childrenTitle = 'applications'|trans %}\r\n{% block children %}{# use in parent template targets #}{% endblock %}\r\n\r\n{% block body %}\r\n    {{ include('@EMSCH\/template\/bootstrap\/breadcrumb.html.twig') }}\r\n    <main role=\"main\" class=\"container\" id=\"main-content\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12 page-main\">\r\n                <h1 class=\"pb-3 mb-4 font-italic border-bottom\" {{ emsch_admin_menu(emsLink) }}>\r\n                    {{ block('title') }}\r\n                <\/h1>\r\n                <div class=\"page-body\">\r\n                    {% block pageContent %}\r\n                        <div class=\"d-flex justify-content-between\">\r\n                            <div>{{ source|locale_attr('body_')|default('')|replace(wyiwygReplaces)|emsch_routing|ems_anti_spam }}<\/div>\r\n                            {% if source.picture_asset|default(false) %}\r\n                                <div>\r\n                                    {% include '@EMSCH\/template\/include\/picture.html.twig' with { \r\n                                        'picture': source,\r\n                                        'class': 'pb-4',\r\n                                        'height': 170,\r\n                                        'width': 250 ,\r\n                                        search_type: source.search_type\r\n                                    } %}\r\n                                <\/div>\r\n                            {% endif %}\r\n                        <\/div>\r\n                        {% block pageBlocks %}{# use in child templates for rendering blocks #}{% endblock %}\r\n                        {{ block('children') }}\r\n                        {{ block('faq') }}\r\n                        {{ block('seeAlsoCards') }}\r\n                    {% endblock pageContent %}\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/main>\r\n{% endblock %}\r\n\r\n\r\n{% block faq %}\r\n    {% set faqOuuids = [] %}\r\n    {% for seeAlsoLink in source.see_also|default([])|filter(v => v[0:3] == 'faq')  %}\r\n        {% set faqOuuids = faqOuuids|merge([seeAlsoLink|emsch_ouuid]) %}\r\n    {% endfor %}\r\n    {% set searchFaqs = emsch_search('faq', {\r\n        '_source': [\"_contenttype\", \"title_#{locale}\", \"body_#{locale}\"],\r\n        'query': { \r\n            'bool': {\r\n                'must': [\r\n                    {'term': { (\"show_#{locale}\"): true } }, \r\n                    {'terms' : { '_id': (faqOuuids) } }\r\n                ]\r\n            }\r\n        }\r\n    }).hits.hits %}\r\n    {% set faqs = faqOuuids|map(v => searchFaqs|filter(doc => doc._id == v|emsch_ouuid)|first|default(false))|filter(v => v != false) %}\r\n    \r\n    {% if faqs|length > 0 %}\r\n        <h2>{{ 'questions'|trans }}<\/h2>\r\n        <hr \/>\r\n        <div id=\"questions\" class=\"mb-4\">\r\n            {% for faqIndex, faq in faqs %}\r\n                {% set faqTitle = faq._source|locale_attr('title_') %}\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\" id=\"{{ faqTitle }}\">\r\n                      <h5 class=\"mb-0\">\r\n                        <a href=\"#{{ faqTitle }}\" class=\"btn btn-link\" data-toggle=\"collapse\" data-target=\"#question{{ faqIndex }}\" aria-expanded=\"true\" aria-controls=\"question{{ faqIndex }}\" role=\"button\">{{ faqTitle }}<\/a>\r\n                      <\/h5>\r\n                    <\/div>\r\n                    <div id=\"question{{ faqIndex }}\" class=\"collapse\" aria-labelledby=\"{{ faqTitle }}\" data-parent=\"#questions\">\r\n                        <div class=\"card-body\">{{ faq._source|locale_attr('body_')|default('')|replace(wyiwygReplaces)|emsch_routing|ems_anti_spam }}<\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            {% endfor %}\r\n        <\/div>\r\n    {% endif %}\r\n{% endblock %}\r\n\r\n{% block seeAlsoTitle %}\r\n    <div class=\"row\">\r\n        <div class=\"col-12\">\r\n            <h2>{{ 'interesting.links'|trans }}<\/h2>\r\n            <hr \/>\r\n        <\/div>\r\n    <\/div>\r\n{% endblock %}\r\n\r\n{% block seeAlsoCards %}\r\n    {% trans_default_domain trans_default_domain %}\r\n    {% set seeAlsoOuuids = [] %}\r\n    {% for seeAlsoLink in source.see_also|default([])|filter(v => v[0:4] == 'link' or v[0:4] == 'page')  %}\r\n        {% set seeAlsoOuuids = seeAlsoOuuids|merge([seeAlsoLink|emsch_ouuid]) %}\r\n    {% endfor %} \r\n    {% set searchSeeAlso = emsch_search('link,page', {\r\n        '_source': [\"_contenttype\", \"title_#{locale}\", \"summary_#{locale}\", \"search_type\"],\r\n        'query': { \r\n            'bool': {\r\n                'must': [\r\n                    {'term': { (\"show_#{locale}\"): true } }, \r\n                    {'terms' : { '_id': (seeAlsoOuuids) } }\r\n                ]\r\n            }\r\n        }\r\n    }).hits.hits %}\r\n    \r\n    {# keep sorting of the see also multipe data link field (if not in search null, then remove null) #}\r\n    {% set seeAlsoDocs = seeAlsoOuuids|map(v => searchSeeAlso|filter(doc => doc._id == v|emsch_ouuid)|first|default(null))|filter(v => v != null) %}\r\n    \r\n    {% if seeAlsoDocs|length > 0 %}\r\n        {{ block('seeAlsoTitle') }}\r\n        <div class=\"row\">\r\n            {% for seeAlsoDoc in seeAlsoDocs|filter(v => v != false) %}\r\n                {{ block('seeAlsoCard') }}\r\n            {% endfor %}\r\n        <\/div>\r\n    {% endif %}\r\n{% endblock %}\r\n\r\n\r\n{% block seeAlsoCard %}\r\n    {# overriden in publications #}\r\n    <div class=\"col-md-4 col-sm-6 pt-2 pb-2\">\r\n        <div class=\"card h-100\">\r\n            <div class=\"card-body\">\r\n                <h4 class=\"card-title\">\r\n                    <a href=\"{{ \"ems:\/\/#{seeAlsoDoc._source._contenttype}:#{seeAlsoDoc._id}\"|emsch_routing }}\">{{ seeAlsoDoc._source|locale_attr('title_') }}<\/a>\r\n                <\/h4>\r\n                {{ seeAlsoDoc._source|locale_attr('summary_')|default('')|replace(wyiwygReplaces)|emsch_routing|ems_anti_spam }}\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n{% endblock %}",
    "name": "page\/page.html.twig",
    "_sha1": "ef9af03965c96998de9d8790e5f4134189877cd7",
    "_published_datetime": "2021-01-17T21:33:55+0100"
}
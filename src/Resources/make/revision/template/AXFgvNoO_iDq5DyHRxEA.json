{
    "_contenttype": "template",
    "_finalization_datetime": "2020-05-02T13:51:01+0200",
    "_finalized_by": "theus",
    "body": "{% extends '@EMSCH\/template\/base.html.twig' %}\r\n{% trans_default_domain trans_default_domain %}\r\n\r\n{% block title %}{{ 'news.title'|trans }}{% endblock %}\r\n\r\n{% set breadcrumbItem = 'news.title'|trans %}\r\n\r\n{% block body %}\r\n    {% set pagingSize = 5 %}\r\n    {% set page = app.request.get('p', 0) %}\r\n\r\n    {{ include('@EMSCH\/template\/bootstrap\/breadcrumb.html.twig') }}\r\n    {% set newsSearch = emsch_search('news', {\r\n        \"size\": pagingSize,\r\n        \"from\": (page * pagingSize),\r\n        \"sort\": [ { \"search_dates\": { \"order\": \"desc\" } } ],\r\n        \"query\": {\r\n            \"bool\": {\r\n              \"must\": [\r\n                { \"term\": { (\"show_#{locale}\"): { \"value\": true } } },\r\n                {\r\n                  \"bool\": {\r\n                    \"minimum_should_match\": 1,\r\n                    \"should\": [\r\n                      { \"terms\": { \"target_group\": [ \"#{targetGroup}\" ] } },\r\n                      { \"bool\": {  \"must_not\": [ \r\n                        { \"exists\": { \"field\": \"target_group\" } } ] } }\r\n                        ]\r\n                    }\r\n                }\r\n              ]\r\n            }\r\n          }\r\n    })  %}\r\n    {% set newsItems = newsSearch.hits.hits %}\r\n    \r\n    <main role=\"main\" class=\"container\" id=\"main-content\">\r\n        <div class=\"row\">\r\n            <div class=\"col\">\r\n                <h1 class=\"pb-3 mb-4 font-italic border-bottom\" id=\"news-result\">{{ block('title') }}<\/h1>\r\n                <div class=\"row justify-content-center\">\r\n                    {% for newsItem in newsItems %}\r\n                        <div class=\"col-md-12\">\r\n                            {% include '@EMSCH\/template\/include\/news_thumbnail.html.twig' with {'news': newsItem._source, 'newsId': newsItem._id }  %}\r\n                        <\/div>\r\n                    {% endfor %}\r\n                <\/div>\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col-md-12\">\r\n                        {% if newsItems|length > 0 %}\r\n                            {% set lastPage = (newsSearch.hits.total \/ pagingSize)|round(0, 'ceil') -1 %}\r\n                            {% include '@EMSCH\/template\/include\/pagination.html.twig' with {\r\n                                anchor: \"news-result\",\r\n                                searchRoute: app.request.get('_route'),\r\n                                currentFilters: app.request.query,\r\n                                currentPage: page,\r\n                                pageParameter: 'p',\r\n                                extremePagesLimit: 3, \r\n                                nearbyPagesLimit: 3,\r\n                                lastPage: lastPage > 1000 ? 1000 : lastPage,\r\n                            }  %}\r\n                        {% else %}\r\n                            <h2>{{ 'news.no-result'|trans }}<\/h2>\r\n                        {% endif %}\r\n                    <\/div>\r\n                <\/div>\r\n                \r\n            <\/div>\r\n         <\/div>\r\n    <\/main>\r\n{% endblock %}",
    "name": "page\/news_overview.html.twig",
    "_sha1": "37d150ba837cb289cf24c23e7845483efc539265",
    "_published_datetime": "2021-01-17T21:33:55+0100"
}
{
    "_contenttype": "template",
    "_finalization_datetime": "2020-04-28T13:25:01+0200",
    "_finalized_by": "davmat",
    "body": "{% trans_default_domain trans_default_domain %}\r\n\r\n{% set maxSize = maxSize|default(50) %}\r\n{% set menuChildren = menuChildren|default([]) %}\r\n{% set pictureSettings = pictureSettings|default({\r\n    'class': 'py-2',\r\n    'height': 100,\r\n    'width': 100,\r\n}) %}\r\n\r\n{% set _uids = {} %}\r\n{% set _children = {} %}\r\n{% for item in menuChildren %}\r\n    {% set _uids = _uids|merge([item.id]) %}\r\n    {% set _children = _children|merge({(item.id): {\r\n        label: item.label,\r\n        search_type: item.contentType,\r\n        path: path('emsch_target_'~targetGroup, {slug: attribute(attribute(attribute(byTarget, app.request.locale), targetGroup).slugByUid, item.id)})\r\n    } }) %}\r\n{% endfor %}\r\n\r\n{% set _childrenHits = emsch_search('page,link', {\r\n    \"_source\": [\"_contenttype\", \"title_#{locale}\", \"summary_#{locale}\", \"search_type\", \"picture_*\", \"menu_#{locale}\"],\r\n    \"query\": {\r\n        \"terms\": { (\"menu_#{locale}\"): _uids }\r\n    }\r\n}, 0, 50).hits.hits %}\r\n\r\n{% for hit in _childrenHits %}\r\n    {% set hitUid = attribute(hit._source, \"menu_#{locale}\")|default([])|filter((uid) => uid in _uids)|first|default(false) %}\r\n    {% if hitUid %}\r\n        {% set path = attribute(_children, hitUid).path %}\r\n        {% set _children = _children|merge({(hitUid): {\r\n                label: attribute(hit._source, \"title_#{locale}\"),\r\n                desc: attribute(hit._source, \"summary_#{locale}\"),\r\n                search_type: hit._source.search_type|default(hit._source._contenttype),\r\n                path: path,\r\n                source: hit._source,\r\n        } }) %}\r\n    {% endif %}\r\n{% endfor %}\r\n\r\n{% set totalChildren = _children|length %}\r\n\r\n{% if _children|length > 0 %}\r\n    {% block itemsTitle %}{% endblock %}\r\n    <div class=\"row mb-5\">\r\n        {% for child in _children[0:maxSize] %}\r\n            {% if loop.last == false or _children|length <= maxSize %}\r\n                <div class=\"{% block itemClass %}{{ \"col-md-4\" }}{% endblock %}\">\r\n                    <div class=\"card h-100\">\r\n                        {% if noImage|default(false) == false %}\r\n                            <div class=\"d-flex justify-content-center\">\r\n                                {%- include '@EMSCH\/template\/include\/picture.html.twig' with pictureSettings|merge({ \r\n                                    'picture': child.source|default({}),\r\n                                    'search_type': child.search_type\r\n                                }) -%}\r\n                            <\/div>\r\n                        {% endif %}\r\n                        <div class=\"card-body py-3\">\r\n                            <h5 class=\"card-title text-center\"><a href=\"{{ child.path }}\">{{ child.label }}<\/a><\/h5>\r\n                            {% if printDesc|default(false) == true %}\r\n                                {% if child.desc|default(false) %}\r\n                                    <p class=\"card-text\">{{ child.desc|replace(wyiwygReplaces)|emsch_routing }}<\/p>\r\n                                {% endif %}\r\n                            {% endif %}\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            {% endif %}\r\n        {% endfor %}\r\n        {% if seeAllLink is defined and _children|length > maxSize %}\r\n            <div class=\"{{ block('itemClass') }}\">\r\n                <div class=\"card h-100\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex justify-content-center align-items-center\">\r\n                            <a href=\"{{ seeAllLink }}\">{{ seeAllLabel|trans({'%count%': _children|length }) }}<\/a>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        {% endif %}\r\n    <\/div>\r\n{% endif %}",
    "name": "embed\/print_menu_children.html.twig",
    "_sha1": "999e8d2143e8070323d90d2f862fb5fce13100fe",
    "_published_datetime": "2021-01-17T21:33:55+0100"
}